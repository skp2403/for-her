<!DOCTYPE html>
<html>
<head>
  <title>The Question ğŸ’</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #no { position:absolute; background:#eee; }
    canvas { position:fixed; top:0; left:0; pointer-events:none; }
  </style>
</head>

<body class="fade">

<h2>Almost thereâ€¦</h2>
<p>
Nothing feels nice without a challenge!<br>
Why don't you try answering below with a <b>NO</b> ğŸ˜ˆ<br>
(Try at least 5â€“7 times)
</p>

<h1>Will you marry me? ğŸ’</h1>

<button class="primary" onclick="yes()">YES â¤ï¸</button>
<button id="no">NO ğŸ™ˆ</button>

<div id="next" style="display:none;">
  <h2>ğŸ¥¹ I knew it.</h2>
  <p>Scan the final QR ğŸ‘‡</p>
  <img src="qr4.png" class="qr">
</div>

<div id="egg" style="display:none;">
  <p>ğŸ¥š Easter Egg</p>
  <p>
    I knew you'd try to break this ğŸ˜Œ<br>
    And I love that about you.
  </p>
</div>

<canvas id="confetti"></canvas>

<!-- ğŸµ NEW SONG FOR YES -->
<audio id="yesMusic" preload="auto">
  <source src="music2.mp3" type="audio/mp3">
</audio>

<script>
/* ===== NO BUTTON MOVES ===== */
const no = document.getElementById("no");

no.addEventListener("mouseover", move);
no.addEventListener("touchstart", move);

function move(){
  no.style.left = Math.random() * 260 + "px";
  no.style.top  = Math.random() * 360 + "px";
}

/* ===== YES ACTION ===== */
const yesMusic = document.getElementById("yesMusic");
yesMusic.volume = 0.25;

function yes(){
  // ğŸµ Play the new song (ANDROID SAFE)
  yesMusic.play().catch(() => {});

  // ğŸ‰ Show next section
  document.getElementById("next").style.display = "block";

  // ğŸŠ Confetti
  launchConfetti();
}

/* ===== EASTER EGG ===== */
let taps = 0;
document.body.addEventListener("click", () => {
  taps++;
  if(taps === 5){
    document.getElementById("egg").style.display = "block";
  }
});

/* ===== CONFETTI ===== */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

function launchConfetti(){
  let pieces = [];
  for(let i = 0; i < 150; i++){
    pieces.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 6 + 4,
      dy: Math.random() * 3 + 2
    });
  }

  function draw(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    pieces.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = "#ff4d6d";
      ctx.fill();
      p.y += p.dy;
    });
    requestAnimationFrame(draw);
  }
  draw();
}
</script>

</body>
</html>
